import React from 'react'
import { isReasoningUIPart } from 'ai'
import './ReasoningDisplay.css'

function ReasoningDisplay({ reasoning, isStreaming = false, isCollapsed = false }) {
    // Handle reasoning content that could be a string or reasoning UI parts
    const renderReasoningContent = (content) => {
        if (typeof content === 'string') {
            return content.split('\n').map((line, index) => (
                <div key={index} className="reasoning-step">
                    {line}
                </div>
            ))
        }
        
        if (Array.isArray(content)) {
            return content.map((part, index) => {
                if (isReasoningUIPart(part)) {
                    return (
                        <div key={index} className="reasoning-step">
                            {part.text || part.content}
                        </div>
                    )
                }
                return (
                    <div key={index} className="reasoning-step">
                        {part}
                    </div>
                )
            })
        }
        
        return <div className="reasoning-step">{content}</div>
    }

    if (!reasoning) return null

    return (
        <div className="reasoning-display">
            <div className="reasoning-content">
                <div className="reasoning-header">
                    <svg xmlns="http://www.w3.org/2000/svg" width="4" height="4" viewBox="0 0 4 4" fill="none">
                        <path d="M2 0C1.60444 0 1.21776 0.117298 0.888861 0.337061C0.559963 0.556824 0.313378 0.879743 0.183658 1.25975C0.0539375 1.63975 0.0481074 2.05222 0.167295 2.43552C0.286483 2.81881 0.523309 3.14963 0.843146 3.38268C1.16298 3.61573 1.54839 3.73705 1.94114 3.72835C2.33388 3.71965 2.71299 3.58142 3.02199 3.33460C3.33099 3.08778 3.54841 2.75063 3.6424 2.37267C3.73639 1.99471 3.70173 1.59396 3.54297 1.23607C3.38421 0.878175 3.11003 0.581696 2.76537 0.390524C2.4207 0.199353 2.02241 0.123477 1.63082 0.174758C1.23924 0.226039 0.873085 0.401716 0.588886 0.674508C0.304688 0.9473 0.117298 1.30222 0.0539375 1.68222L0 2L0.0539375 2.31778C0.117298 2.69778 0.304688 3.0527 0.588886 3.32549C0.873085 3.59828 1.23924 3.77396 1.63082 3.82524C2.02241 3.87652 2.4207 3.80065 2.76537 3.60948C3.11003 3.4183 3.38421 3.12182 3.54297 2.76393C3.70173 2.40604 3.73639 2.00529 3.6424 1.62733C3.54841 1.24937 3.33099 0.912217 3.02199 0.665401C2.71299 0.418585 2.33388 0.280349 1.94114 0.271652C1.54839 0.262955 1.16298 0.384273 0.843146 0.617322C0.523309 0.850371 0.286483 1.18119 0.167295 1.56448C0.0481074 1.94778 0.0539375 2.36025 0.183658 2.74025C0.313378 3.12026 0.559963 3.44318 0.888861 3.66294C1.21776 3.8827 1.60444 4 2 4C2.39556 4 2.78224 3.8827 3.11114 3.66294C3.44004 3.44318 3.68662 3.12026 3.81634 2.74025C3.94606 2.36025 3.95189 1.94778 3.8327 1.56448C3.71352 1.18119 3.47669 0.850371 3.15685 0.617322C2.83702 0.384273 2.45161 0.262955 2.05886 0.271652C1.66612 0.280349 1.28701 0.418585 0.978015 0.665401C0.669017 0.912217 0.451591 1.24937 0.357603 1.62733C0.263614 2.00529 0.298271 2.40604 0.457031 2.76393C0.615791 3.12182 0.889969 3.4183 1.23463 3.60948C1.57929 3.80065 1.97759 3.87652 2.36918 3.82524C2.76076 3.77396 3.12692 3.59828 3.41111 3.32549C3.69531 3.0527 3.8827 2.69778 3.94606 2.31778L4 2L3.94606 1.68222C3.8827 1.30222 3.69531 0.9473 3.41111 0.674508C3.12692 0.401716 2.76076 0.226039 2.36918 0.174758C1.97759 0.123477 1.57929 0.199353 1.23463 0.390524C0.889969 0.581696 0.615791 0.878175 0.457031 1.23607C0.298271 1.59396 0.263614 1.99471 0.357603 2.37267C0.451591 2.75063 0.669017 3.08778 0.978015 3.33460C1.28701 3.58142 1.66612 3.71965 2.05886 3.72835C2.45161 3.73705 2.83702 3.61573 3.15685 3.38268C3.47669 3.14963 3.71352 2.81881 3.8327 2.43552C3.95189 2.05222 3.94606 1.63975 3.81634 1.25975C3.68662 0.879743 3.44004 0.556824 3.11114 0.337061C2.78224 0.117298 2.39556 0 2 0Z" fill="#5C5F62"/>
                    </svg>
                    <span className="reasoning-indicator">Thinking...</span>
                </div>
                {renderReasoningContent(reasoning)}
                {isStreaming && (
                    <div className="thinking-indicator">
                        <div className="thinking-dots">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                )}
            </div>
        </div>
    )
}

export default ReasoningDisplay